{"version":3,"sources":["store.tsx","hooks/useOnKeyGoTo.tsx","hooks/useOnKeyDown.tsx","App.tsx","utils.tsx","components/FootLinks.tsx","components/Md.tsx","components/Intro.tsx","components/Article.tsx","components/Navigation.tsx","components/IndexPage.tsx","components/Finales.tsx","index.tsx"],"names":["FootNoteType","useOnKeyGoTo","key","to","fallback","history","useHistory","callback","useEffect","f","ev","document","addEventListener","removeEventListener","useOnKeyDown","useCallback","push","fNull","props","Paths","formatedArticles","articles","map","title","chapter","names_data","names","i","name","chapters","footnotes","formatedEndSections","data","o","section","formatEndSections","endSections","indexData","articlesData","text","Array","from","group","d","items","flat","filter","typ","Chapter","ArticleName","Set","sort","ref","formatIndexData","useStore","create","set","get","intro","getNArticles","length","getArticle","getArticleLink","getPrevLink","getNextLink","getFirstLink","getLastLink","getNEndSections","getEndSection","getEndSectionLink","getPrevEndSectionLink","getNextEndSectionLink","getFirstEndSectionLink","getLastEndSectionLink","mdFormatFootnotes","join","FootLinks","prevLink","nextLink","prevText","nextText","className","CustomA","children","href","startsWith","Md","md","overrides","options","a","footer","ArticleMd","selector","state","selectFirstLink","selectLastLink","Intro","replace","mdFormatIntro","firstLink","firstArticle","lastLink","lastEndSection","Article","id","useParams","article","link","prevArticle","nextArticle","allFootnotes","concat","mdFormatArticle","leftLink","home","rightLink","discussConfig","url","identifier","language","index","h4","style","marginTop","marginBottom","shortname","config","Link","Navigation","selectIndexData","SelectLastLink","selectGetArticleLink","selectGetEndSectionLink","IndexPage","location","useLocation","searchParams","useMemo","URLSearchParams","search","searchTitle","searchChapter","showBack","j","lastLinkSelector","Finales","endSection","prevEndSection","nextEndSection","lastArticle","mdFormatEndSection","AppContent","exact","path","App","basename","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3dfd05d7.chunk.js","sourcesContent":["import create from \"zustand\";\nimport { Paths } from \"./App\";\nimport { group } from \"d3\";\nimport names from \"./data/names.json\";\nimport intro from \"./data/intro.json\";\nimport articles from \"./data/articles.json\";\nimport endSections from \"./data/end_sections.json\";\n\nexport enum FootNoteType {\n  Intro = \"intro\",\n  ArticleName = \"article_name\",\n  ArticleText = \"article_text\",\n  EndSection = \"end_section\",\n  Chapter = \"chapter\",\n}\nexport interface FootNote {\n  ref: number;\n  text: string;\n  typ: string;\n}\n\nexport interface FootNotes {\n  footnotes: FootNote[];\n}\n\nexport interface DataItemIntro extends FootNotes {\n  title: string;\n  text: string;\n}\n\ninterface NameInfo {\n  i: number;\n  name: string;\n}\n\ninterface ChapterInfo extends NameInfo, FootNotes {}\n\nexport interface DataItemArticle extends FootNotes {\n  title: NameInfo;\n  chapter: ChapterInfo | null;\n  article: number;\n  name: string | null;\n  text: string;\n}\n\nexport interface DataItemEndSection extends FootNotes {\n  section: number;\n  text: string;\n  title: string;\n}\n\nexport interface DataItemIndex {\n  title: string;\n  chapters: {\n    chapter: string | undefined;\n    articles: Omit<DataItemArticle, \"title\" | \"chapter\" | \"text\">[];\n    i: number;\n  }[];\n  i: number;\n}\n\nexport type State = {\n  intro: DataItemIntro;\n  articles: DataItemArticle[];\n  endSections: DataItemEndSection[];\n  indexData: { indexData: DataItemIndex[] } & FootNotes;\n  getNArticles: () => number;\n  getArticle: (i: number) => DataItemArticle | undefined;\n  getArticleLink: (i: number | null) => string | null;\n  getFirstLink: () => [string | null, number];\n  getLastLink: () => [string | null, number];\n  getPrevLink: (i: number | null) => [string | null, number | null];\n  getNextLink: (i: number | null) => [string | null, number | null];\n  getNEndSections: () => number;\n  getEndSection: (i: number) => DataItemEndSection | undefined;\n  getEndSectionLink: (i: number | null) => string | null;\n  getPrevEndSectionLink: (i: number | null) => [string | null, number | null];\n  getNextEndSectionLink: (i: number | null) => [string | null, number | null];\n  getFirstEndSectionLink: () => [string | null, number];\n  getLastEndSectionLink: () => [string | null, number];\n};\n\nconst formatArticles: (data: typeof articles) => DataItemArticle[] = (data) => {\n  return data.map(({ title, chapter, ...props }) => {\n    const names_data = names[title - 1];\n\n    return {\n      title: { i: title, name: names_data.name },\n      chapter: chapter\n        ? {\n            i: chapter,\n            name: names_data.chapters[chapter - 1].name,\n            footnotes: names_data.chapters[chapter - 1].footnotes,\n          }\n        : null,\n      ...props,\n    };\n  });\n};\n\nconst formatEndSections: (data: typeof endSections) => DataItemEndSection[] = (\n  data\n) => {\n  return data.map((o, i) => ({ section: i + 1, ...o }));\n};\n\nconst formatIndexData: (\n  articlesData: DataItemArticle[]\n) => { indexData: DataItemIndex[] } & FootNotes = (articlesData ) => {\n  const data = articlesData.map(({ text, ...props }) => props);\n  const indexData = Array.from(\n    group(data, (d) => d.title.name),\n    ([title, items], i) => {\n      const chapters = Array.from(\n        group(\n          items.map(({ title, ...props }) => props),\n          (d) => d.chapter?.name\n        ),\n        ([chapter, items], i) => {\n          const articles = items.map(({ chapter, ...props }) => props);\n          return { chapter, articles, i: i + 1 };\n        }\n      );\n      return { title, chapters, i: i + 1 };\n    }\n  );\n\n  const footnotes = data\n    .map(({ footnotes, chapter }) =>\n      [footnotes, chapter ? chapter.footnotes : []].flat()\n    )\n    .flat()\n    .filter(\n      (o) =>\n        o.typ === FootNoteType.Chapter || o.typ === FootNoteType.ArticleName\n    );\n  const uniqueFootnotes = [...new Set(footnotes)].sort((o) => o.ref);\n\n  return { indexData, footnotes: uniqueFootnotes };\n};\n\nfunction fNull<T, U>(f: (props: T) => U) {\n  return (props: T | null) => (props === null ? null : f(props));\n}\n\nconst formatedArticles = formatArticles(articles);\nconst formatedEndSections = formatEndSections(endSections);\nconst indexData = formatIndexData(formatedArticles);\n\nexport const useStore = create<State>((set, get) => ({\n  intro,\n  articles: formatedArticles,\n  endSections: formatedEndSections,\n  indexData: indexData,\n  getNArticles: () => get().articles.length,\n  getArticle: (i) => get().articles[i - 1],\n  getArticleLink: fNull((i) =>\n    i > 0 && i <= get().getNArticles() ? `${Paths.articles}/${i}` : null\n  ),\n  getPrevLink: (i) => {\n    return i === null ? [null, null] : [get().getArticleLink(i - 1), i - 1];\n  },\n  getNextLink: (i) => {\n    return i === null ? [null, null] : [get().getArticleLink(i + 1), i + 1];\n  },\n  getFirstLink: () => [get().getArticleLink(1), 1],\n  getLastLink: () => {\n    const i = get().getNArticles();\n    return [get().getArticleLink(i), i];\n  },\n  getNEndSections: () => get().endSections.length,\n  getEndSection: (i) => get().endSections[i-1],\n  getEndSectionLink: fNull((i) =>\n    i > 0 && i <= get().getNEndSections() ? `${Paths.endSections}/${i}` : null\n  ),\n  getPrevEndSectionLink: (i) => {\n    return i === null ? [null, null] : [get().getEndSectionLink(i - 1), i - 1];\n  },\n  getNextEndSectionLink: (i) => {\n    return i === null ? [null, null] : [get().getEndSectionLink(i + 1), i + 1];\n  },\n  getFirstEndSectionLink: () => [get().getEndSectionLink(1), 1],\n  getLastEndSectionLink: () => {\n    const i = get().getNEndSections();\n    return [get().getEndSectionLink(i), i];\n  },\n}));\n","import { useCallback } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useOnKeyDown } from \"./useOnKeyDown\";\n\ninterface Props {\n  key: string;\n  to: string | null;\n  fallback?: string | null;\n}\n\nexport const useOnKeyGoTo: (props: Props) => void = ({\n  key,\n  to,\n  fallback = null,\n}) => {\n  const history = useHistory();\n  const callback = useCallback(() => {\n    if (to) history.push(to);\n    else if (fallback) history.push(fallback);\n  }, [history, to, fallback]);\n\n  useOnKeyDown({ key, callback });\n};\n","import { useEffect } from \"react\";\n\ninterface Props {\n  key: string;\n  callback: () => void;\n}\n\nexport const useOnKeyDown: (props: Props) => void = ({ key, callback }) => {\n  useEffect(() => {\n    const f = (ev: { key: string }) => {\n      if (ev.key === key) callback();\n    };\n\n    document.addEventListener(\"keydown\", f);\n    return () => void document.removeEventListener(\"keydown\", f);\n  }, [key, callback]);\n};\n","import React from \"react\";\nimport { HashRouter, Route, Switch } from \"react-router-dom\";\nimport { Intro } from \"./components/Intro\";\nimport { Article } from \"./components/Article\";\nimport { Navigation } from \"./components/Navigation\";\nimport { IndexPage } from \"./components/IndexPage\";\nimport { Finales } from \"./components/Finales\";\n\nexport enum Paths {\n  home = \"/\",\n  index = \"/indice\",\n  articles = \"/articulos\",\n  article = \"/articulos/:id\",\n  endSections = \"/finales\",\n  endSection = \"/finales/:id\",\n  url = \"https://renato145.github.io/const-peru\",\n}\n\nexport const AppContent: React.FC = () => {\n  return (\n    <div className=\"container md:max-w-screen-md mx-auto\">\n      <Navigation />\n      <div className=\"mt-4 px-2\">\n        <Switch>\n          <Route exact path={Paths.index}>\n            <IndexPage />\n          </Route>\n          <Route exact path={Paths.home}>\n            <Intro />\n          </Route>\n          <Route exact path={Paths.article}>\n            <Article />\n          </Route>\n          <Route exact path={Paths.endSection}>\n            <Finales />\n          </Route>\n        </Switch>\n      </div>\n    </div>\n  );\n};\n\nexport const App: React.FC = () => (\n  <HashRouter basename=\"/\">\n    <AppContent />\n  </HashRouter>\n);\n","import {\n  DataItemArticle,\n  DataItemEndSection,\n  DataItemIntro,\n  FootNote,\n} from \"./store\";\n\nexport const mdFormatFootnotes = (footnotes: FootNote[]) =>\n  footnotes.map(({ ref, text }) => `[^${ref}]: *${text}*`).join(\"\\n\\n\");\n\nexport const mdFormatIntro = ({ title, text, footnotes }: DataItemIntro) => {\n  let out = [\n    `## ${title}`,\n    text.replace(\n      \"CONSTITUCION POLITICA DEL PERU DE 1993\",\n      \"# CONSTITUCION POLITICA DEL PERU DE 1993\"\n    ),\n    mdFormatFootnotes(footnotes),\n  ];\n  return out.join(\"\\n\\n\");\n};\n\nexport const mdFormatArticle = ({\n  chapter,\n  article,\n  name,\n  text,\n  footnotes,\n}: DataItemArticle) => {\n  const chapterFootnotes = chapter?.footnotes ?? [];\n  const allFootnotes = chapterFootnotes.concat(footnotes);\n\n  const out = [\n    `## Artículo ${article}${name ? \": \" + name : \"\"}`,\n    text,\n    mdFormatFootnotes(allFootnotes),\n  ];\n\n  return out.join(\"\\n\\n\");\n};\n\nexport const mdFormatEndSection = ({\n  section,\n  title,\n  text,\n  footnotes,\n}: DataItemEndSection) => {\n  const out = [`## ${title}`, text, mdFormatFootnotes(footnotes)];\n\n  return out.join(\"\\n\\n\");\n};\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\ninterface Props {\n  prevLink: string | null;\n  nextLink: string | null;\n  prevText: string | null;\n  nextText: string | null;\n}\n\nexport const FootLinks: React.FC<Props> = ({\n  prevLink,\n  nextLink,\n  prevText,\n  nextText,\n}) => {\n  return (\n    <div className=\"prose mt-4 flex justify-between\">\n      <div>{prevLink && <Link to={prevLink}>{prevText}</Link>}</div>\n      <div>{nextLink && <Link to={nextLink}>{nextText}</Link>}</div>\n    </div>\n  );\n};\n","import React, { HTMLProps } from \"react\";\nimport Markdown, { MarkdownToJSX } from \"markdown-to-jsx\";\n\nconst CustomA: React.FC<HTMLProps<HTMLAnchorElement>> = ({\n  children,\n  href,\n  ...props\n}) =>\n  href?.startsWith(\"#\") ? (\n    <>{children}</>\n  ) : (\n    <a href={href} {...props}>\n      {children}\n    </a>\n  );\n\ninterface MdProps {\n  md: string;\n  overrides?: MarkdownToJSX.Overrides;\n}\n\nexport const Md: React.FC<MdProps> = ({ md, overrides }) => (\n  <Markdown\n    options={{\n      overrides: overrides ?? {\n        a: CustomA,\n        footer: {\n          props: {\n            className:\n              \"text-sm text-gray-600 border-gray-300 border-t pt-1 px-1\",\n          },\n        },\n      },\n    }}\n  >\n    {md}\n  </Markdown>\n);\n\nexport const ArticleMd: React.FC<MdProps> = ({ md, overrides }) => (\n  <article className=\"prose prose-blue\">\n    <Md md={md} overrides={overrides} />\n  </article>\n);\n","import React from \"react\";\nimport { useOnKeyGoTo } from \"../hooks/useOnKeyGoTo\";\nimport { useStore, State } from \"../store\";\nimport { mdFormatIntro } from \"../utils\";\nimport { FootLinks } from \"./FootLinks\";\nimport { ArticleMd } from \"./Md\";\n\nconst selector = (state: State) => state.intro;\nconst selectFirstLink = (state: State) => state.getFirstLink();\nconst selectLastLink = (state: State) => state.getLastEndSectionLink();\n\n\nexport const Intro: React.FC = () => {\n  const data = useStore(selector);\n  const md = mdFormatIntro(data);\n  const [firstLink, firstArticle] = useStore(selectFirstLink);\n  const [lastLink, lastEndSection] = useStore(selectLastLink);\n  useOnKeyGoTo({ key: \"ArrowLeft\", to: lastLink });\n  useOnKeyGoTo({ key: \"ArrowRight\", to: firstLink });\n\n  return (\n    <div>\n      <ArticleMd md={md} />\n      <FootLinks\n        prevLink={lastLink}\n        prevText={`←Finales ${lastEndSection}`}\n        nextLink={firstLink}\n        nextText={`Artículo ${firstArticle}→`}\n      />\n    </div>\n  );\n};\n","import React, { useCallback } from \"react\";\nimport { Link, Redirect, useParams } from \"react-router-dom\";\nimport { DiscussionEmbed } from \"disqus-react\";\nimport { Paths } from \"../App\";\nimport { useOnKeyGoTo } from \"../hooks/useOnKeyGoTo\";\nimport { State, useStore } from \"../store\";\nimport { mdFormatArticle } from \"../utils\";\nimport { FootLinks } from \"./FootLinks\";\nimport { ArticleMd, Md } from \"./Md\";\n\nconst selectFirstLink = (state: State) => state.getFirstEndSectionLink();\n\nexport const Article: React.FC = () => {\n  const { id: idParam } = useParams<{ id: string }>();\n  const id = +idParam;\n  const article = useStore(useCallback((state) => state.getArticle(id), [id]));\n  const link = useStore(useCallback((state) => state.getArticleLink(id), [id]));\n  const [prevLink, prevArticle] = useStore(\n    useCallback((state) => state.getPrevLink(id), [id])\n  );\n  const [nextLink, nextArticle] = useStore(\n    useCallback((state) => state.getNextLink(id), [id])\n  );\n  const [firstLink] = useStore(selectFirstLink);\n  const md = article ? mdFormatArticle(article) : null;\n\n  const leftLink = prevLink ?? Paths.home;\n  const rightLink = nextLink ?? firstLink;\n\n  const discussConfig = {\n    url: `${Paths.url}/${link}`,\n    identifier: `article_${id}`,\n    title: `Artículo ${id}`,\n    language: 'es_MX',\n  };\n\n  useOnKeyGoTo({ key: \"ArrowLeft\", to: leftLink });\n  useOnKeyGoTo({ key: \"ArrowRight\", to: rightLink });\n\n  return md ? (\n    <div>\n      <div className=\"prose\">\n        <Link to={`${Paths.index}?titulo=${article?.title.i}`}>\n          <Md md={`#### Título ${article?.title.i}: ${article?.title.name}`} />\n        </Link>\n        <Link to={`${Paths.index}?titulo=${article?.chapter?.i}`}>\n          <Md\n            overrides={{\n              h4: { props: { style: { marginTop: 0, marginBottom: \"-2em\" } } },\n            }}\n            md={`#### Capítulo ${article?.chapter?.i}: ${article?.chapter?.name}`}\n          />\n        </Link>\n        <ArticleMd md={md} />\n        <FootLinks\n          prevLink={leftLink}\n          prevText={prevLink ? `←Artículo ${prevArticle}` : \"←Preámbulo\"}\n          nextLink={rightLink}\n          nextText={nextLink ? `Artículo ${nextArticle}→` : \"Finales 1→\"}\n        />\n      </div>\n      <div className=\"mt-8\">\n        <DiscussionEmbed shortname=\"const-peru\" config={discussConfig} />\n      </div>\n    </div>\n  ) : (\n    <Redirect to={Paths.index} />\n  );\n};\n","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { Paths } from \"../App\";\n\nconst Link: React.FC<{to: Paths}> = ({to, children}) => (\n  <NavLink className=\"px-4 md:px-6 py-1 rounded hover:bg-gray-200 transition md:text-lg font-medium\" to={to}>{children}</NavLink>\n)\n\nexport const Navigation: React.FC = () => (\n  <div className=\"flex px-2 divide-x-2 bg-gray-100\">\n    <Link to={Paths.home}>Inicio</Link>\n    <Link to={Paths.index}>Indice</Link>\n  </div>\n);\n","import React, { useMemo } from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport { Paths } from \"../App\";\nimport { useOnKeyGoTo } from \"../hooks/useOnKeyGoTo\";\nimport { State, useStore } from \"../store\";\nimport { mdFormatFootnotes } from \"../utils\";\nimport { Md } from \"./Md\";\n\nconst selector = (state: State) => ({\n  intro: state.intro,\n  endSections: state.endSections,\n});\nconst selectIndexData = (state: State) => state.indexData;\nconst SelectLastLink = (state: State) => state.getLastEndSectionLink();\nconst selectGetArticleLink = (state: State) => state.getArticleLink;\nconst selectGetEndSectionLink = (state: State) => state.getEndSectionLink;\n\nexport const IndexPage: React.FC = () => {\n  const location = useLocation();\n  const searchParams = useMemo(() => new URLSearchParams(location.search), [\n    location.search,\n  ]);\n  const { intro, endSections } = useStore(selector);\n  const { indexData, footnotes } = useStore(selectIndexData);\n  const [lastLink] = useStore(SelectLastLink);\n  const getArticleLink = useStore(selectGetArticleLink);\n  const getEndSectionLink = useStore(selectGetEndSectionLink);\n  useOnKeyGoTo({ key: \"ArrowLeft\", to: lastLink });\n  useOnKeyGoTo({ key: \"ArrowRight\", to: Paths.home });\n  const searchTitle = searchParams.get(\"titulo\");\n  const searchChapter = searchParams.get(\"capitulo\");\n  const showBack = searchTitle || searchChapter;\n\n  return (\n    <div className=\"prose\">\n      <h1>Indice</h1>\n      {showBack && <Link to={Paths.index}>Ver todo</Link>}\n      <Link to={Paths.home}>\n        <Md md={`## ${intro.title}`} />\n      </Link>\n      {indexData\n        .filter(({ i }) => (searchTitle ? i === +searchTitle : true))\n        .map(({ title, chapters, i }) => (\n          <div key={i}>\n            <Link to={`${Paths.index}?titulo=${i}`}>\n              <Md md={`## Título ${i}: ${title}`} />\n            </Link>\n            {chapters\n              .filter(({ i }) => (searchChapter ? i === +searchChapter : true))\n              .map(({ chapter, articles, i: j }) => (\n                <div key={`${i}-${j}`} className=\"ml-4\">\n                  {chapter && (\n                    <Link to={`${Paths.index}?titulo=${i}&capitulo=${j}`}>\n                      <Md md={`### Capítulo ${j}: ${chapter}`} />\n                    </Link>\n                  )}\n                  {articles.map(({ article, name }) => (\n                    <div key={article} className=\"ml-4\">\n                      <Link to={\"\" + getArticleLink(article)}>\n                        <Md\n                          md={`#### Artículo ${article} ${\n                            name ? `: ${name}` : \"\"\n                          }`}\n                        />\n                      </Link>\n                    </div>\n                  ))}\n                </div>\n              ))}\n          </div>\n        ))}\n        {endSections.map(({title, section}, i) => (\n          <div key={i}>\n            <Link to={\"\" + getEndSectionLink(section)}>\n              <Md md={`### ${title}`} />\n            </Link>\n            </div>\n        ))}\n      <div className=\"mt-12\">\n        <Md md={mdFormatFootnotes(footnotes)} />\n      </div>\n    </div>\n  );\n};\n","import React, { useCallback } from \"react\";\nimport { Redirect, useParams } from \"react-router-dom\";\nimport { Paths } from \"../App\";\nimport { useOnKeyGoTo } from \"../hooks/useOnKeyGoTo\";\nimport { State, useStore } from \"../store\";\nimport { mdFormatEndSection } from \"../utils\";\nimport { FootLinks } from \"./FootLinks\";\nimport { ArticleMd } from \"./Md\";\n\nconst lastLinkSelector = (state: State) => state.getLastLink();\n\nexport const Finales: React.FC = () => {\n  const { id: idParam } = useParams<{ id: string }>();\n  const id = +idParam;\n  const endSection = useStore(\n    useCallback((state) => state.getEndSection(id), [id])\n  );\n  const [prevLink, prevEndSection] = useStore(\n    useCallback((state) => state.getPrevEndSectionLink(id), [id])\n  );\n  const [nextLink, nextEndSection] = useStore(\n    useCallback((state) => state.getNextEndSectionLink(id), [id])\n  );\n  const [lastLink, lastArticle] = useStore(lastLinkSelector);\n  const md = endSection ? mdFormatEndSection(endSection) : null;\n\n  const leftLink = prevLink ?? lastLink;\n  const rightLink = nextLink ?? Paths.home;\n\n  useOnKeyGoTo({ key: \"ArrowLeft\", to: leftLink });\n  useOnKeyGoTo({ key: \"ArrowRight\", to: rightLink });\n\n  return md ? (\n    <div className=\"prose\">\n      <ArticleMd md={md} />\n      <FootLinks\n        prevLink={leftLink}\n        prevText={\n          prevLink ? `←Finales ${prevEndSection}` : `←Artículo ${lastArticle}`\n        }\n        nextLink={rightLink}\n        nextText={nextLink ? `Finales ${nextEndSection}→` : 'Preámbulo→' }\n      />\n    </div>\n  ) : (\n    <Redirect to={Paths.index} />\n  );\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport { App } from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}