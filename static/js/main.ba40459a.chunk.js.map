{"version":3,"sources":["store.tsx","hooks/useOnKeyGoTo.tsx","hooks/useOnKeyDown.tsx","App.tsx","utils.tsx","components/FootLinks.tsx","components/Md.tsx","components/Intro.tsx","components/Article.tsx","components/Navigation.tsx","components/IndexPage.tsx","index.tsx"],"names":["FootNoteType","useOnKeyGoTo","key","to","fallback","history","useHistory","callback","useEffect","f","ev","document","addEventListener","removeEventListener","useOnKeyDown","useCallback","push","Paths","formatedArticles","articles","map","title","chapter","props","names_data","names","i","name","chapters","footnotes","indexData","data","text","Array","from","group","d","items","flat","filter","o","typ","Chapter","ArticleName","Set","sort","ref","formatIndexData","useStore","create","set","get","intro","getNArticles","length","getArticle","getArticleLink","getPrevLink","getNextLink","getFirstLink","getLastLink","mdFormatFootnotes","join","FootLinks","prevLink","nextLink","prevText","nextText","className","CustomA","children","href","startsWith","Md","md","overrides","options","a","footer","ArticleMd","selector","state","selectFirstLink","selectLastLink","Intro","mdFormatIntro","firstLink","firstArticle","lastLink","lastArticle","Article","id","useParams","article","prevArticle","nextArticle","allFootnotes","concat","mdFormatArticle","home","index","h4","style","marginTop","marginBottom","Link","Navigation","SelectLastLink","selectGetArticleLink","IndexPage","location","useLocation","searchParams","useMemo","URLSearchParams","search","searchTitle","searchChapter","showBack","idx","j","AppContent","exact","path","App","basename","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ba40459a.chunk.js","sourcesContent":["import create from \"zustand\";\nimport names from \"./data/names.json\";\nimport intro from \"./data/intro.json\";\nimport articles from \"./data/articles.json\";\nimport { Paths } from \"./App\";\n// import end_sections from \"./data/end_sections.json\";\nimport { group } from \"d3\";\n\nexport enum FootNoteType {\n  Intro = \"intro\",\n  ArticleName = \"article_name\",\n  ArticleText = \"article_text\",\n  EndSection = \"end_section\",\n  Chapter = \"chapter\",\n}\nexport interface FootNote {\n  ref: number;\n  text: string;\n  typ: string;\n}\n\nexport interface FootNotes {\n  footnotes: FootNote[];\n}\n\nexport interface DataItemIntro extends FootNotes {\n  title: string;\n  text: string;\n}\n\ninterface NameInfo {\n  i: number;\n  name: string;\n}\n\ninterface ChapterInfo extends NameInfo, FootNotes {}\n\nexport interface DataItemArticle extends FootNotes {\n  title: NameInfo;\n  chapter: ChapterInfo | null;\n  article: number;\n  name: string | null;\n  text: string;\n}\n\nexport interface DataItemIndex {\n  title: string;\n  chapters: {\n    chapter: string | undefined;\n    articles: Omit<DataItemArticle, \"title\" | \"chapter\" | \"text\">[];\n    i: number;\n  }[];\n  i: number;\n}\n\nexport type State = {\n  intro: DataItemIntro;\n  articles: DataItemArticle[];\n  indexData: { indexData: DataItemIndex[] } & FootNotes;\n  getNArticles: () => number;\n  getArticle: (i: number) => DataItemArticle | undefined;\n  getArticleLink: (i: number | null) => string | null;\n  getFirstLink: () => [string | null, number];\n  getLastLink: () => [string | null, number];\n  getPrevLink: (i: number | null) => [string | null, number | null];\n  getNextLink: (i: number | null) => [string | null, number | null];\n};\n\nconst formatArticles: (data: typeof articles) => DataItemArticle[] = (data) => {\n  return data.map(({ title, chapter, ...props }) => {\n    const names_data = names[title - 1];\n\n    return {\n      title: { i: title, name: names_data.name },\n      chapter: chapter\n        ? {\n            i: chapter,\n            name: names_data.chapters[chapter - 1].name,\n            footnotes: names_data.chapters[chapter - 1].footnotes,\n          }\n        : null,\n      ...props,\n    };\n  });\n};\n\nconst formatIndexData: (\n  data: DataItemArticle[]\n) => { indexData: DataItemIndex[] } & FootNotes = (articles) => {\n  const data = articles.map(({ text, ...props }) => props);\n  const indexData = Array.from(\n    group(data, (d) => d.title.name),\n    ([title, items], i) => {\n      const chapters = Array.from(\n        group(\n          items.map(({ title, ...props }) => props),\n          (d) => d.chapter?.name\n        ),\n        ([chapter, items], i) => {\n          const articles = items.map(({ chapter, ...props }) => props);\n          return { chapter, articles, i: i + 1 };\n        }\n      );\n      return { title, chapters, i: i + 1 };\n    }\n  );\n  const footnotes = data\n    .map(({ footnotes, chapter }) =>\n      [footnotes, chapter ? chapter.footnotes : []].flat()\n    )\n    .flat()\n    .filter(\n      (o) =>\n        o.typ === FootNoteType.Chapter || o.typ === FootNoteType.ArticleName\n    );\n  const uniqueFootnotes = [...new Set(footnotes)].sort((o) => o.ref);\n\n  return { indexData, footnotes: uniqueFootnotes };\n};\n\nfunction fNull<T, U>(f: (props: T) => U) {\n  return (props: T | null) => (props === null ? null : f(props));\n}\n\nconst formatedArticles = formatArticles(articles);\nconst indexData = formatIndexData(formatedArticles);\n\nexport const useStore = create<State>((set, get) => ({\n  intro,\n  articles: formatedArticles,\n  indexData: indexData,\n  getNArticles: () => get().articles.length,\n  getArticle: (i) => get().articles[i - 1],\n  getArticleLink: fNull((i) =>\n    i > 0 && i <= get().getNArticles() ? `${Paths.articles}/${i}` : null\n  ),\n  getPrevLink: (i) => {\n    return i === null ? [null, null] : [get().getArticleLink(i - 1), i - 1];\n  },\n  getNextLink: (i) => {\n    return i === null ? [null, null] : [get().getArticleLink(i + 1), i + 1];\n  },\n  getFirstLink: () => [get().getArticleLink(1), 1],\n  getLastLink: () => {\n    const i = get().getNArticles();\n    return [get().getArticleLink(i), i];\n  },\n}));\n","import { useCallback } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useOnKeyDown } from \"./useOnKeyDown\";\n\ninterface Props {\n  key: string;\n  to: string | null;\n  fallback?: string | null;\n}\n\nexport const useOnKeyGoTo: (props: Props) => void = ({\n  key,\n  to,\n  fallback = null,\n}) => {\n  const history = useHistory();\n  const callback = useCallback(() => {\n    if (to) history.push(to);\n    else if (fallback) history.push(fallback);\n  }, [history, to, fallback]);\n\n  useOnKeyDown({ key, callback });\n};\n","import { useEffect } from \"react\";\n\ninterface Props {\n  key: string;\n  callback: () => void;\n}\n\nexport const useOnKeyDown: (props: Props) => void = ({ key, callback }) => {\n  useEffect(() => {\n    const f = (ev: { key: string }) => {\n      if (ev.key === key) callback();\n    };\n\n    document.addEventListener(\"keydown\", f);\n    return () => void document.removeEventListener(\"keydown\", f);\n  }, [key, callback]);\n};\n","import React from \"react\";\nimport { HashRouter, Route, Switch } from \"react-router-dom\";\nimport { Intro } from \"./components/Intro\";\nimport { Article } from \"./components/Article\";\nimport { Navigation } from \"./components/Navigation\";\nimport { IndexPage } from \"./components/IndexPage\";\n\nexport enum Paths {\n  home = \"/\",\n  index = \"/indice\",\n  articles = \"/articulos\",\n  article = \"/articulos/:id\",\n}\n\nexport const AppContent: React.FC = () => {\n  return (\n    <div className=\"container md:max-w-screen-md mx-auto\">\n      <Navigation />\n      <div className=\"mt-4 px-2\">\n        <Switch>\n          <Route exact path={Paths.home}>\n            <Intro />\n          </Route>\n          <Route exact path={Paths.index}>\n            <IndexPage />\n          </Route>\n          <Route path={Paths.article}>\n            <Article />\n          </Route>\n        </Switch>\n      </div>\n    </div>\n  );\n};\n\nexport const App: React.FC = () => (\n  <HashRouter basename=\"/\">\n    <AppContent />\n  </HashRouter>\n);\n","import { DataItemArticle, DataItemIntro, FootNote } from \"./store\";\n\nexport const mdFormatFootnotes = (footnotes: FootNote[]) =>\n  footnotes.map(({ ref, text }) => `[^${ref}]: *${text}*`).join(\"\\n\\n\");\n\nexport const mdFormatIntro = ({ title, text, footnotes }: DataItemIntro) => {\n  let out = [`# ${title}`, text, mdFormatFootnotes(footnotes)];\n  return out.join(\"\\n\\n\");\n};\n\nexport const mdFormatArticle = ({\n  chapter,\n  article,\n  name,\n  text,\n  footnotes,\n}: DataItemArticle) => {\n  const chapterFootnotes = chapter?.footnotes ?? [];\n  const allFootnotes = chapterFootnotes.concat(footnotes);\n\n  const out = [\n    `## Artículo ${article}${name ? \": \" + name : \"\"}`,\n    text,\n    mdFormatFootnotes(allFootnotes),\n  ];\n\n  return out.join(\"\\n\\n\");\n};\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\ninterface Props {\n  prevLink: string | null;\n  nextLink: string | null;\n  prevText: string | null;\n  nextText: string | null;\n}\n\nexport const FootLinks: React.FC<Props> = ({\n  prevLink,\n  nextLink,\n  prevText,\n  nextText,\n}) => {\n  return (\n    <div className=\"prose mt-4 flex justify-between\">\n      <div>{prevLink && <Link to={prevLink}>{prevText}</Link>}</div>\n      <div>{nextLink && <Link to={nextLink}>{nextText}</Link>}</div>\n    </div>\n  );\n};\n","import React, { HTMLProps } from \"react\";\nimport Markdown, { MarkdownToJSX } from \"markdown-to-jsx\";\n\nconst CustomA: React.FC<HTMLProps<HTMLAnchorElement>> = ({\n  children,\n  href,\n  ...props\n}) =>\n  href?.startsWith(\"#\") ? (\n    <>{children}</>\n  ) : (\n    <a href={href} {...props}>\n      {children}\n    </a>\n  );\n\ninterface MdProps {\n  md: string;\n  overrides?: MarkdownToJSX.Overrides;\n}\n\nexport const Md: React.FC<MdProps> = ({ md, overrides }) => (\n  <Markdown\n    options={{\n      overrides: overrides ?? {\n        a: CustomA,\n        footer: {\n          props: {\n            className:\n              \"text-sm text-gray-600 border-gray-300 border-t pt-1 px-1\",\n          },\n        },\n      },\n    }}\n  >\n    {md}\n  </Markdown>\n);\n\nexport const ArticleMd: React.FC<MdProps> = ({ md, overrides }) => (\n  <article className=\"prose prose-blue\">\n    <Md md={md} overrides={overrides} />\n  </article>\n);\n","import React from \"react\";\nimport { useOnKeyGoTo } from \"../hooks/useOnKeyGoTo\";\nimport { useStore, State } from \"../store\";\nimport { mdFormatIntro } from \"../utils\";\nimport { FootLinks } from \"./FootLinks\";\nimport { ArticleMd } from \"./Md\";\n\nconst selector = (state: State) => state.intro;\nconst selectFirstLink = (state: State) => state.getFirstLink();\nconst selectLastLink = (state: State) => state.getLastLink();\n\n\nexport const Intro: React.FC = () => {\n  const data = useStore(selector);\n  const md = mdFormatIntro(data);\n  const [firstLink, firstArticle] = useStore(selectFirstLink);\n  const [lastLink, lastArticle] = useStore(selectLastLink);\n  useOnKeyGoTo({ key: \"ArrowLeft\", to: lastLink });\n  useOnKeyGoTo({ key: \"ArrowRight\", to: firstLink });\n\n  return (\n    <div>\n      <ArticleMd md={md} />\n      <FootLinks\n        prevLink={firstLink}\n        prevText={`←Artículo ${lastArticle}`}\n        nextLink={lastLink}\n        nextText={`Artículo ${firstArticle}→`}\n      />\n    </div>\n  );\n};\n","import React, { useCallback } from \"react\";\nimport { Link, Redirect, useParams } from \"react-router-dom\";\nimport { Paths } from \"../App\";\nimport { useOnKeyGoTo } from \"../hooks/useOnKeyGoTo\";\nimport { useStore } from \"../store\";\nimport { mdFormatArticle } from \"../utils\";\nimport { FootLinks } from \"./FootLinks\";\nimport { ArticleMd, Md } from \"./Md\";\n\nexport const Article: React.FC = () => {\n  const { id: idParam } = useParams<{ id: string }>();\n  const id = +idParam;\n  const article = useStore(useCallback((state) => state.getArticle(id), [id]));\n  const [prevLink, prevArticle] = useStore(\n    useCallback((state) => state.getPrevLink(id), [id])\n  );\n  const [nextLink, nextArticle] = useStore(\n    useCallback((state) => state.getNextLink(id), [id])\n  );\n  const md = article ? mdFormatArticle(article) : null;\n\n  useOnKeyGoTo({ key: \"ArrowLeft\", to: prevLink, fallback: Paths.home });\n  useOnKeyGoTo({ key: \"ArrowRight\", to: nextLink, fallback: Paths.home });\n\n  return md ? (\n    <div className=\"prose\">\n      <Link to={`${Paths.index}?titulo=${article?.title.i}`}>\n        <Md md={`#### Título ${article?.title.i}: ${article?.title.name}`} />\n      </Link>\n      <Link to={`${Paths.index}?titulo=${article?.chapter?.i}`}>\n        <Md\n          overrides={{\n            h4: { props: { style: { marginTop: 0, marginBottom: \"-2em\" } } },\n          }}\n          md={`#### Capítulo ${article?.chapter?.i}: ${article?.chapter?.name}`}\n        />\n      </Link>\n      <ArticleMd md={md} />\n      <FootLinks\n        prevLink={prevLink}\n        prevText={`←Artículo ${prevArticle}`}\n        nextLink={nextLink}\n        nextText={`Artículo ${nextArticle}→`}\n      />\n    </div>\n  ) : (\n    <Redirect to={Paths.index} />\n  );\n};\n","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { Paths } from \"../App\";\n\nconst Link: React.FC<{to: Paths}> = ({to, children}) => (\n  <NavLink className=\"px-4 md:px-6 py-1 rounded hover:bg-gray-200 transition md:text-lg font-medium\" to={to}>{children}</NavLink>\n)\n\nexport const Navigation: React.FC = () => (\n  <div className=\"flex px-2 divide-x-2 bg-gray-100\">\n    <Link to={Paths.home}>Inicio</Link>\n    <Link to={Paths.index}>Indice</Link>\n  </div>\n);\n","import React, { useMemo } from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport { Paths } from \"../App\";\nimport { useOnKeyGoTo } from \"../hooks/useOnKeyGoTo\";\nimport { State, useStore } from \"../store\";\nimport { mdFormatFootnotes } from \"../utils\";\nimport { Md } from \"./Md\";\n\nconst selector = (state: State) => state.indexData;\nconst selectFirstLink = (state: State) => state.getFirstLink();\nconst SelectLastLink = (state: State) => state.getLastLink();\nconst selectGetArticleLink = (state: State) => state.getArticleLink;\n\nexport const IndexPage: React.FC = () => {\n  const location = useLocation();\n  const searchParams = useMemo(() => new URLSearchParams(location.search), [\n    location.search,\n  ]);\n  const { indexData, footnotes } = useStore(selector);\n  const [firstLink] = useStore(selectFirstLink);\n  const [lastLink] = useStore(SelectLastLink);\n  const getArticleLink = useStore(selectGetArticleLink);\n  useOnKeyGoTo({ key: \"ArrowLeft\", to: lastLink });\n  useOnKeyGoTo({ key: \"ArrowRight\", to: firstLink });\n  const searchTitle = searchParams.get(\"titulo\");\n  const searchChapter = searchParams.get(\"capitulo\");\n  const showBack = searchTitle || searchChapter;\n\n  return (\n    <div className=\"prose\">\n      <h1>Indice</h1>\n      {showBack && <Link to={Paths.index}>Ver todo</Link>}\n      {indexData\n        .filter(({ i }) => (searchTitle ? i === +searchTitle : true))\n        .map(({ title, chapters, i }, idx) => (\n          <div key={i}>\n            <Link to={`${Paths.index}?titulo=${i}`}>\n              <Md md={`## Título ${i}: ${title}`} />\n            </Link>\n            {chapters\n              .filter(({ i }) => (searchChapter ? i === +searchChapter : true))\n              .map(({ chapter, articles, i: j }) => (\n                <div key={`${i}-${j}`} className=\"ml-4\">\n                  {chapter && (\n                    <Link to={`${Paths.index}?titulo=${i}&capitulo=${j}`}>\n                      <Md md={`### Capítulo ${j}: ${chapter}`} />\n                    </Link>\n                  )}\n                  {articles.map(({ article, name }) => (\n                    <div key={article} className=\"ml-4\">\n                      <Link to={\"\" + getArticleLink(article)}>\n                        <Md\n                          md={`#### Artículo ${article} ${\n                            name ? `: ${name}` : \"\"\n                          }`}\n                        />\n                      </Link>\n                    </div>\n                  ))}\n                </div>\n              ))}\n          </div>\n        ))}\n      <div className=\"mt-12\">\n        <Md md={mdFormatFootnotes(footnotes)} />\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport { App } from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}